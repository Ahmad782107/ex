<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø© - Android</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©">
    <meta name="description" content="ØªØ·Ø¨ÙŠÙ‚ Ù…Ø­Ø§Ø³Ø¨Ø© Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
        
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .card-shadow {
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .product-card {
            transition: all 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        
        .product-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }
        
        .status-badge {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e5e7eb;
            z-index: 50;
        }
        
        .nav-item {
            transition: all 0.3s ease;
        }
        
        .nav-item.active {
            color: #667eea;
            transform: scale(1.1);
        }
        
        .floating-add {
            position: fixed;
            bottom: 80px;
            left: 20px;
            z-index: 40;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        
        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin: 20px;
            max-width: 400px;
            width: 100%;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal.show .modal-content {
            transform: scale(1);
        }
        
        .input-field {
            transition: all 0.3s ease;
            border: 2px solid #e5e7eb;
        }
        
        .input-field:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .stats-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
    </style>
</head>
<body class="bg-gray-50 pb-20">
    <!-- Header -->
    <header class="gradient-bg text-white p-4 sticky top-0 z-30">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3 space-x-reverse">
                <div class="w-10 h-10 bg-white rounded-lg flex items-center justify-center">
                    <span class="text-2xl">ğŸ’¼</span>
                </div>
                <div>
                    <h1 class="text-xl font-bold">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</h1>
                    <p class="text-sm opacity-90">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±</p>
                </div>
            </div>
            <div class="flex items-center space-x-2 space-x-reverse">
                <span class="status-badge bg-green-500 text-xs px-2 py-1 rounded-full">Ù…ØªØµÙ„</span>
                <button id="languageToggle" class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center mr-2">
                    <span class="text-sm">ğŸŒ</span>
                </button>
                <button class="w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                    <span class="text-lg">âš™ï¸</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Stats Cards -->
    <div class="p-4 slide-in">
        <div class="grid grid-cols-2 gap-4 mb-6">
            <div class="stats-card p-4 rounded-xl card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</p>
                        <p class="text-2xl font-bold text-gray-800" id="totalProducts">12</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">ğŸ“¦</span>
                    </div>
                </div>
            </div>
            <div class="stats-card p-4 rounded-xl card-shadow">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-gray-600 text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©</p>
                        <p class="text-2xl font-bold text-gray-800" id="totalValue">2,450 Ù„.Ø³</p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <span class="text-2xl">ğŸ’°</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Search and Filter -->
    <div class="px-4 mb-6">
        <div class="flex space-x-3 space-x-reverse">
            <div class="flex-1 relative">
                <input type="text" id="searchInput" placeholder="Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." 
                       class="w-full p-3 pr-10 rounded-xl border border-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <span class="absolute right-3 top-3 text-gray-400">ğŸ”</span>
            </div>
            <button id="filterBtn" class="p-3 bg-white rounded-xl border border-gray-200 card-shadow">
                <span class="text-xl">âš™ï¸</span>
            </button>
        </div>
    </div>

    <!-- Products List -->
    <div class="px-4">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-bold text-gray-800">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
            <button id="sortBtn" class="text-sm text-blue-600 font-medium">ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±</button>
        </div>
        
        <div id="productsList" class="space-y-4">
            <!-- Products will be dynamically added here -->
        </div>
    </div>

    <!-- Floating Add Button -->
    <button id="addProductBtn" class="floating-add w-14 h-14 btn-primary rounded-full flex items-center justify-center text-white text-2xl card-shadow">
        <span>+</span>
    </button>

    <!-- Bottom Navigation -->
    <nav class="mobile-nav p-4">
        <div class="flex justify-around">
            <button class="nav-item active flex flex-col items-center space-y-1">
                <span class="text-xl">ğŸ </span>
                <span class="text-xs">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
            </button>
            <button class="nav-item flex flex-col items-center space-y-1">
                <span class="text-xl">ğŸ“Š</span>
                <span class="text-xs">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</span>
            </button>
            <button class="nav-item flex flex-col items-center space-y-1">
                <span class="text-xl">ğŸ’³</span>
                <span class="text-xs">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</span>
            </button>
            <button class="nav-item flex flex-col items-center space-y-1">
                <span class="text-xl">ğŸ‘¤</span>
                <span class="text-xs">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</span>
            </button>
        </div>
    </nav>

    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content">
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-xl font-bold text-gray-800">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                <button id="closeModal" class="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center">
                    <span class="text-gray-600">âœ•</span>
                </button>
            </div>
            
            <form id="productForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                    <input type="text" id="productName" required 
                           class="input-field w-full p-3 rounded-lg focus:outline-none" 
                           placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø³Ø¹Ø±</label>
                        <input type="number" id="productPrice" required step="0.01"
                               class="input-field w-full p-3 rounded-lg focus:outline-none" 
                               placeholder="0.00">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ÙƒÙ…ÙŠØ©</label>
                        <input type="number" id="productQuantity" required 
                               class="input-field w-full p-3 rounded-lg focus:outline-none" 
                               placeholder="0">
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ÙØ¦Ø©</label>
                    <select id="productCategory" required 
                            class="input-field w-full p-3 rounded-lg focus:outline-none">
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                        <option value="electronics">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
                        <option value="clothing">Ù…Ù„Ø§Ø¨Ø³</option>
                        <option value="food">Ø·Ø¹Ø§Ù…</option>
                        <option value="books">ÙƒØªØ¨</option>
                        <option value="other">Ø£Ø®Ø±Ù‰</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ø®ØµÙ… (%)</label>
                    <input type="number" id="productDiscount" min="0" max="100" 
                           class="input-field w-full p-3 rounded-lg focus:outline-none" 
                           placeholder="0">
                </div>
                
                <div class="flex space-x-3 space-x-reverse pt-4">
                    <button type="submit" class="flex-1 btn-primary text-white py-3 rounded-lg font-medium">
                        Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬
                    </button>
                    <button type="button" id="cancelBtn" class="px-6 py-3 bg-gray-100 text-gray-700 rounded-lg font-medium">
                        Ø¥Ù„ØºØ§Ø¡
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            ar: {
                appTitle: "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©",
                appSubtitle: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±",
                connected: "Ù…ØªØµÙ„",
                totalProducts: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
                totalValue: "Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù‚ÙŠÙ…Ø©",
                searchPlaceholder: "Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬...",
                productsList: "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª",
                sortByPrice: "ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±",
                home: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
                reports: "Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",
                sales: "Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",
                profile: "Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ",
                addNewProduct: "Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯",
                productName: "Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",
                price: "Ø§Ù„Ø³Ø¹Ø±",
                quantity: "Ø§Ù„ÙƒÙ…ÙŠØ©",
                category: "Ø§Ù„ÙØ¦Ø©",
                discount: "Ø®ØµÙ… (%)",
                addProduct: "Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬",
                cancel: "Ø¥Ù„ØºØ§Ø¡",
                selectCategory: "Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©",
                electronics: "Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª",
                clothing: "Ù…Ù„Ø§Ø¨Ø³",
                food: "Ø·Ø¹Ø§Ù…",
                books: "ÙƒØªØ¨",
                other: "Ø£Ø®Ø±Ù‰",
                enterProductName: "Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬",
                productAdded: "ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­! âœ…",
                productDeleted: "ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­! ğŸ—‘ï¸",
                deleteConfirm: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ",
                editProduct: "ØªØ­Ø±ÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬:",
                demoFeature: "(Ù‡Ø°Ù‡ Ù…ÙŠØ²Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©)",
                currency: "Ù„.Ø³"
            },
            en: {
                appTitle: "Accounting App",
                appSubtitle: "Product & Price Management",
                connected: "Online",
                totalProducts: "Total Products",
                totalValue: "Total Value",
                searchPlaceholder: "Search for product...",
                productsList: "Products List",
                sortByPrice: "Sort by Price",
                home: "Home",
                reports: "Reports",
                sales: "Sales",
                profile: "Profile",
                addNewProduct: "Add New Product",
                productName: "Product Name",
                price: "Price",
                quantity: "Quantity",
                category: "Category",
                discount: "Discount (%)",
                addProduct: "Add Product",
                cancel: "Cancel",
                selectCategory: "Select Category",
                electronics: "Electronics",
                clothing: "Clothing",
                food: "Food",
                books: "Books",
                other: "Other",
                enterProductName: "Enter product name",
                productAdded: "Product added successfully! âœ…",
                productDeleted: "Product deleted successfully! ğŸ—‘ï¸",
                deleteConfirm: "Are you sure you want to delete this product?",
                editProduct: "Edit Product:",
                demoFeature: "(Demo feature)",
                currency: "SYP"
            }
        };

        // Current language
        let currentLanguage = localStorage.getItem('appLanguage') || 'ar';

        // Sample products data
        const defaultProducts = [
            {
                id: 1,
                name: "Ù„Ø§Ø¨ØªÙˆØ¨ Dell XPS 13",
                nameEn: "Dell XPS 13 Laptop",
                price: 1750000,
                quantity: 5,
                category: "electronics",
                discount: 10,
                emoji: "ğŸ’»"
            },
            {
                id: 2,
                name: "Ù‚Ù…ÙŠØµ Ù‚Ø·Ù†ÙŠ Ø£Ø²Ø±Ù‚",
                nameEn: "Blue Cotton Shirt",
                price: 60000,
                quantity: 25,
                category: "clothing",
                discount: 0,
                emoji: "ğŸ‘”"
            },
            {
                id: 3,
                name: "ÙƒØªØ§Ø¨ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©",
                nameEn: "Advanced Programming Book",
                price: 42500,
                quantity: 15,
                category: "books",
                discount: 15,
                emoji: "ğŸ“š"
            },
            {
                id: 4,
                name: "Ø³Ù…Ø§Ø¹Ø§Øª Ù„Ø§Ø³Ù„ÙƒÙŠØ©",
                nameEn: "Wireless Headphones",
                price: 225000,
                quantity: 8,
                category: "electronics",
                discount: 5,
                emoji: "ğŸ§"
            },
            {
                id: 5,
                name: "Ø­Ù‚ÙŠØ¨Ø© Ø¬Ù„Ø¯ÙŠØ©",
                nameEn: "Leather Bag",
                price: 140000,
                quantity: 12,
                category: "other",
                discount: 20,
                emoji: "ğŸ‘œ"
            }
        ];

        // Load products from localStorage or use default
        let products = JSON.parse(localStorage.getItem('accountingAppProducts')) || defaultProducts;

        // Save products to localStorage
        function saveProducts() {
            localStorage.setItem('accountingAppProducts', JSON.stringify(products));
        }

        // Get translation
        function t(key) {
            return translations[currentLanguage][key] || key;
        }

        // DOM elements
        const productsList = document.getElementById('productsList');
        const addProductBtn = document.getElementById('addProductBtn');
        const addProductModal = document.getElementById('addProductModal');
        const closeModal = document.getElementById('closeModal');
        const cancelBtn = document.getElementById('cancelBtn');
        const productForm = document.getElementById('productForm');
        const searchInput = document.getElementById('searchInput');
        const sortBtn = document.getElementById('sortBtn');
        const totalProducts = document.getElementById('totalProducts');
        const totalValue = document.getElementById('totalValue');

        // Category emojis
        const categoryEmojis = {
            electronics: "ğŸ’»",
            clothing: "ğŸ‘”",
            food: "ğŸ•",
            books: "ğŸ“š",
            other: "ğŸ“¦"
        };

        // Switch language
        function switchLanguage() {
            currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
            localStorage.setItem('appLanguage', currentLanguage);
            
            // Update HTML direction and language
            document.documentElement.lang = currentLanguage;
            document.documentElement.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            
            updateUI();
            renderProducts();
        }

        // Update UI text based on current language
        function updateUI() {
            // Update header
            document.querySelector('h1').textContent = t('appTitle');
            document.querySelector('header p').textContent = t('appSubtitle');
            document.querySelector('.status-badge').textContent = t('connected');
            
            // Update stats cards
            document.querySelectorAll('.stats-card p')[0].textContent = t('totalProducts');
            document.querySelectorAll('.stats-card p')[2].textContent = t('totalValue');
            
            // Update search placeholder
            document.getElementById('searchInput').placeholder = t('searchPlaceholder');
            
            // Update products list title
            document.querySelector('h2').textContent = t('productsList');
            document.getElementById('sortBtn').textContent = t('sortByPrice');
            
            // Update navigation
            const navTexts = ['home', 'reports', 'sales', 'profile'];
            document.querySelectorAll('.nav-item span:last-child').forEach((span, index) => {
                span.textContent = t(navTexts[index]);
            });
            
            // Update modal
            document.querySelector('.modal-content h3').textContent = t('addNewProduct');
            const labels = document.querySelectorAll('.modal-content label');
            const labelKeys = ['productName', 'price', 'quantity', 'category', 'discount'];
            labels.forEach((label, index) => {
                if (labelKeys[index]) {
                    label.textContent = t(labelKeys[index]);
                }
            });
            
            // Update form elements
            document.getElementById('productName').placeholder = t('enterProductName');
            document.querySelector('option[value=""]').textContent = t('selectCategory');
            document.querySelector('option[value="electronics"]').textContent = t('electronics');
            document.querySelector('option[value="clothing"]').textContent = t('clothing');
            document.querySelector('option[value="food"]').textContent = t('food');
            document.querySelector('option[value="books"]').textContent = t('books');
            document.querySelector('option[value="other"]').textContent = t('other');
            
            document.querySelector('button[type="submit"]').textContent = t('addProduct');
            document.getElementById('cancelBtn').textContent = t('cancel');
            
            // Update CSS classes for RTL/LTR
            const spaceClasses = currentLanguage === 'ar' ? 'space-x-reverse' : '';
            document.querySelectorAll('.space-x-3, .space-x-2').forEach(el => {
                el.className = el.className.replace(/space-x-reverse/g, '');
                if (currentLanguage === 'ar') {
                    el.className += ' space-x-reverse';
                }
            });
        }

        // Render products
        function renderProducts(productsToRender = products) {
            productsList.innerHTML = '';
            
            productsToRender.forEach(product => {
                const finalPrice = product.price * (1 - product.discount / 100);
                const productCard = document.createElement('div');
                productCard.className = 'product-card bg-white p-4 rounded-xl slide-in';
                
                const productName = currentLanguage === 'ar' ? product.name : (product.nameEn || product.name);
                const quantityLabel = currentLanguage === 'ar' ? 'Ø§Ù„ÙƒÙ…ÙŠØ©:' : 'Qty:';
                const discountLabel = currentLanguage === 'ar' ? 'Ø®ØµÙ…' : 'Discount';
                const currency = t('currency');
                
                productCard.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3 ${currentLanguage === 'ar' ? 'space-x-reverse' : ''}">
                            <div class="w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center">
                                <span class="text-2xl">${product.emoji}</span>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800">${productName}</h3>
                                <p class="text-sm text-gray-600">${quantityLabel} ${product.quantity}</p>
                                <div class="flex items-center space-x-2 ${currentLanguage === 'ar' ? 'space-x-reverse' : ''} mt-1">
                                    ${product.discount > 0 ? 
                                        `<span class="text-lg font-bold text-green-600">${finalPrice.toLocaleString()} ${currency}</span>
                                         <span class="text-sm text-gray-400 line-through">${product.price.toLocaleString()} ${currency}</span>
                                         <span class="bg-red-100 text-red-600 text-xs px-2 py-1 rounded-full">${discountLabel} ${product.discount}%</span>` :
                                        `<span class="text-lg font-bold text-gray-800">${product.price.toLocaleString()} ${currency}</span>`
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="flex flex-col space-y-2">
                            <button onclick="editProduct(${product.id})" class="w-8 h-8 bg-blue-100 text-blue-600 rounded-lg flex items-center justify-center">
                                <span class="text-sm">âœï¸</span>
                            </button>
                            <button onclick="deleteProduct(${product.id})" class="w-8 h-8 bg-red-100 text-red-600 rounded-lg flex items-center justify-center">
                                <span class="text-sm">ğŸ—‘ï¸</span>
                            </button>
                        </div>
                    </div>
                `;
                
                productsList.appendChild(productCard);
            });
            
            updateStats();
        }

        // Update statistics
        function updateStats() {
            totalProducts.textContent = products.length;
            const total = products.reduce((sum, product) => {
                const finalPrice = product.price * (1 - product.discount / 100);
                return sum + (finalPrice * product.quantity);
            }, 0);
            totalValue.textContent = `${total.toLocaleString()} ${t('currency')}`;
        }

        // Add new product
        function addProduct(productData) {
            const newProduct = {
                id: Date.now(),
                ...productData,
                nameEn: productData.nameEn || productData.name,
                emoji: categoryEmojis[productData.category] || "ğŸ“¦"
            };
            products.unshift(newProduct);
            saveProducts(); // Save to localStorage
            renderProducts();
            
            // Show success message
            showNotification(t('productAdded'));
        }

        // Delete product
        function deleteProduct(id) {
            if (confirm(t('deleteConfirm'))) {
                const product = products.find(p => p.id === id);
                products = products.filter(product => product.id !== id);
                saveProducts(); // Save to localStorage
                renderProducts();
                showNotification(t('productDeleted'));
                const productName = currentLanguage === 'ar' ? product.name : (product.nameEn || product.name);
                sendNotification(t('productDeleted').split('!')[0], `${productName}`);
            }
        }

        // Edit product (simplified - just show alert for demo)
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (product) {
                const productName = currentLanguage === 'ar' ? product.name : (product.nameEn || product.name);
                alert(`${t('editProduct')} ${productName}\n${t('demoFeature')}`);
            }
        }

        // Search functionality
        function searchProducts(query) {
            const filtered = products.filter(product => 
                product.name.toLowerCase().includes(query.toLowerCase())
            );
            renderProducts(filtered);
        }

        // Sort products
        let sortAscending = true;
        function sortProducts() {
            const sorted = [...products].sort((a, b) => {
                const priceA = a.price * (1 - a.discount / 100);
                const priceB = b.price * (1 - b.discount / 100);
                return sortAscending ? priceA - priceB : priceB - priceA;
            });
            sortAscending = !sortAscending;
            sortBtn.textContent = sortAscending ? 'ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø± â†‘' : 'ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø± â†“';
            renderProducts(sorted);
        }

        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 bg-green-500 text-white px-4 py-2 rounded-lg z-50 slide-in';
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Event listeners
        addProductBtn.addEventListener('click', () => {
            addProductModal.classList.add('show');
        });

        closeModal.addEventListener('click', () => {
            addProductModal.classList.remove('show');
        });

        cancelBtn.addEventListener('click', () => {
            addProductModal.classList.remove('show');
        });

        // Language toggle
        document.getElementById('languageToggle').addEventListener('click', switchLanguage);

        addProductModal.addEventListener('click', (e) => {
            if (e.target === addProductModal) {
                addProductModal.classList.remove('show');
            }
        });

        productForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const productData = {
                name: document.getElementById('productName').value,
                nameEn: document.getElementById('productName').value, // For now, same as name
                price: parseFloat(document.getElementById('productPrice').value),
                quantity: parseInt(document.getElementById('productQuantity').value),
                category: document.getElementById('productCategory').value,
                discount: parseInt(document.getElementById('productDiscount').value) || 0
            };
            
            addProduct(productData);
            addProductModal.classList.remove('show');
            productForm.reset();
            sendNotification(t('productAdded').split('!')[0], `${productData.name}`);
        });

        searchInput.addEventListener('input', (e) => {
            searchProducts(e.target.value);
        });

        sortBtn.addEventListener('click', sortProducts);

        // Navigation functionality
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Push notification support
        function requestNotificationPermission() {
            if ('Notification' in window && 'serviceWorker' in navigator) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        console.log('Notification permission granted');
                        registerServiceWorker();
                    }
                });
            }
        }

        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('data:application/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdwdXNoJywgZnVuY3Rpb24oZXZlbnQpIHsKICBjb25zdCBvcHRpb25zID0gewogICAgYm9keTogJ9mE2K/ZitmD2YUg2KXYtNi52KfYsSDYrNiv2YrYryDZgdmKINiq2LfYqNmK2YIg2KfZhNmF2K3Yp9iz2KjYqSEnLAogICAgaWNvbjogJy9pY29uLTE5Mi5wbmcnLAogICAgYmFkZ2U6ICcvaWNvbi0xOTIucG5nJwogIH07CiAgZXZlbnQud2FpdFVudGlsKAogICAgc2VsZi5yZWdpc3RyYXRpb24uc2hvd05vdGlmaWNhdGlvbign2KrYt9io2YrZgiDYp9mE2YXYrdin2LPYqNipJywgb3B0aW9ucykKICApOwp9KTs=')
                .then(registration => {
                    console.log('Service Worker registered successfully');
                })
                .catch(error => {
                    console.log('Service Worker registration failed');
                });
            }
        }

        function sendNotification(title, message) {
            if (Notification.permission === 'granted') {
                new Notification(title, {
                    body: message,
                    icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiM2NjdlZWEiLz4KPHJlY3QgeD0iMjQiIHk9IjI0IiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgcng9IjEyIiBmaWxsPSJ3aGl0ZSIvPgo8dGV4dCB4PSI5NiIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3ZWVhIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDgiIGZvbnQtd2VpZ2h0PSJib2xkIj7wn5K8PC90ZXh0Pgo8dGV4dCB4PSI5NiIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3ZWVhIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiPtmF2K3Yp9iz2KjYqTwvdGV4dD4KPC9zdmc+',
                    badge: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiM2NjdlZWEiLz4KPHJlY3QgeD0iMjQiIHk9IjI0IiB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgcng9IjEyIiBmaWxsPSJ3aGl0ZSIvPgo8dGV4dCB4PSI5NiIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3ZWVhIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDgiIGZvbnQtd2VpZ2h0PSJib2xkIj7wn5K8PC90ZXh0Pgo8dGV4dCB4PSI5NiIgeT0iMTQwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjNjY3ZWVhIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTYiPtmF2K3Yp9iz2KjYqTwvdGV4dD4KPC9zdmc+'
                });
            }
        }

        // Initialize app
        function initializeApp() {
            // Set initial language and direction
            document.documentElement.lang = currentLanguage;
            document.documentElement.dir = currentLanguage === 'ar' ? 'rtl' : 'ltr';
            
            // Update UI with current language
            updateUI();
            renderProducts();
            requestNotificationPermission();
            
            // Add some animation delays for better UX
            setTimeout(() => {
                document.querySelectorAll('.slide-in').forEach((el, index) => {
                    el.style.animationDelay = `${index * 0.1}s`;
                });
            }, 100);
        }

        // Start the app
        initializeApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'969e9a77b06ce201',t:'MTc1NDMxNjI2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
